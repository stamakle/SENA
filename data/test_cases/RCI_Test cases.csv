Name,Test_Case,Status,Type,Description,Test Step #,Test Step Description,Test Step Expected Result
PCIe SSD: Overnight I/O Stress,TC-15174,Active,SDK,TestDrive TestCase Objective was not specified.,1,"Description
Clear the SEL

Input Data
",Implicit
,TC-15174,,,,2,"Description
Run stress to all PCIe SSD devices using MLTT, iogen, or diskio overnight.

Input Data
",implicit.
,TC-15174,,,,3,"Description
Review logs from all management applications, the test tool, and OS logs.

Input Data
",No errors in logs.
,TC-15174,,,,4,"Description
Check the SEL for any correctable errors

Input Data
",No correctable errors are found
PCIe SSD: PCIe SSD: Max link width/ Link Speed on a hot inserted device,TC-8786,Active,TBD,Verify that a PCIe SSD device can train to max supported link width and link speed on hot insertion,1,"Description

Boot to the OS.



Input Data",Implicit.
,TC-8786,,,,2,"Description

Hot insert the the device under test when the OS is fully booted.



Input Data",Verify that the new hardware is added to the system and will configure it if the driver is available.
,TC-8786,,,,3,"Description

Read the Link Status Register of the parent PCIe port immediately above the NVMe endpoint device.



Input Data","The Data Link Layer Link Active bit is set and

The PCIe SSD settings are trained to max supported link width and speed"
,TC-8786,,,,4,"Description

Perform some I/O on the hot inserted NVMe device



Input Data",I/O is successful
,TC-8786,,,,5,"Description

Repeat step 3 and 4 but this time hot add the drive while the system is booting to OS.



Input Data",Same result as in 3 and 4.
PCIe SSD - UEFI Driver - ePSA UEFI Diagnostics,TC-784,Active,Manual,To test that the NVM_EXPRESS_PASSTHRU_PROTOCOL has been implemented by the UEFI driver,1,"Description
Install at least one NVMe PCIe SSD in the system

Input Data
",Implicit
,TC-784,,,,2,"Description
Make sure to install the latest DUP for the ePSA UEFI Diagnostics utility

Input Data
",DUP installs successfully
,TC-784,,,,3,"Description
Boot into the ""F11 (Boot Manager)->System Utilties->Launch Diagnostics""

Input Data
",The ePSA utility opens
,TC-784,,,,4,"Description
Click the ""Configuration"" tab In the ""[PCIe]"" section, make sure that you see the NVMe device, and the PCIe Bridge Card (if there are 2.5"" PCIe SSD devices in the system) In the ""[Storage]"" section, find the hard drive(s) that have type ""NVMe""

Input Data
","The tab is present


The PCIe Bridge Card (if present) and all NVMe PCIe SSDs are listed and have the correct, ""Slot Number"" ""Vendor"" ""Device"" ""SubVendor"" and ""SubDevice"" IDs.


All devices are displayed as unique hard drives with the correct information, ""OEM"" ""product"" ""revision"" ""S/N"" ""type"" ""size"" ""CTRL"""
,TC-784,,,,5,"Description
Double-click each of the NVMe PCIe SSD hard drive numbers (identified in step 4)

Input Data
","The tests run successfully and report the results to the ""Results"" tab

In the ""Results"" tab, if the device supports the NVMe Device Self-test command, then make sure that the results indicate that a DST Short or Long was ran in place of simply the SMART data"
PCIe SSD: discovery after OS reboots (long term),TC-57691,Active,SDK,Verify PCIe SSDs are reliably discovered after OS reboots and no errors are found.,1,"Description
Verify that the system is updated with the latest revisions for BMC/iDRAC, backplane, BIOS, CPLD, etc.

Input Data
",Implicit.
,TC-57691,,,,2,"Description
Attach the maximum number of PCIe SSDs permitted by the system configuration.

Input Data
",Implicit.
,TC-57691,,,,3,"Description
Clear the system's SEL log.

Input Data
",SEL log cleared.
,TC-57691,,,,4,"Description
Boot into the OS and ensure system logs in automatically

Input Data
",Implicit.
,TC-57691,,,,5,"Description
Setup a script to do the following upon power on: boot --> OS login --> Device Detection --> OS reboot --> repeat

Input Data
",Test is set up to run unattended.
,TC-57691,,,,6,"Description
Allow the system to repeat the reboots for at least 12 hours.

Input Data
","No memory or system initialization errors, or PCIe SSD errors are found. All PCIe SSDs are still accesible."
,TC-57691,,,,7,"Description
If applicable, check the device debug log for any errors.

Input Data
",No errors found.
,TC-57691,,,,8,"Description
Check the system's SEL log for any errors.

Input Data
",No errors related to PCIe SSD are found.
PCIe SSD: discovery after DC power cycle (long term),TC-51058,Active,SDK,Verify PCIe SSDs are reliably discovered after D/C power cycle.,1,"Description
Verify that the system is updated with the latest revisions for BMC/iDRAC, backplane, BIOS, CPLD, etc.

Input Data
",Implicit.
,TC-51058,,,,2,"Description
Attach the maximum number of PCIe SSDs permitted by the system configuration.

Input Data
",Implicit.
,TC-51058,,,,3,"Description
Clear the system's SEL log.

Input Data
",SEL log cleared.
,TC-51058,,,,4,"Description
Boot into the OS and ensure system logs in automatically

Input Data
",Implicit.
,TC-51058,,,,5,"Description
Using a utility such as racadm (may use any other utilities that are available), DC power cycle the system after the system boots and the attempt has been made to discover all PCIe SSD devices. Sequence should look like: boot --> OS login --> Device Detection --> DC power cycle (if no errors) Using racadm, the command should look like: racadm serveraction powercycle

Input Data
",Test is set up to run unattended.
,TC-51058,,,,6,"Description
Allow the system to repeat the D/C cycle for at least 12 hours.

Input Data
","No memory or system initialization errors, or PCIe SSD errors are found. All PCIe SSDs are still accesible."
,TC-51058,,,,7,"Description
If applicable, check the device debug log for any errors.

Input Data
",No errors found.
,TC-51058,,,,8,"Description
Check the system's SEL log for any errors.

Input Data
",No errors related to PCIe SSD are found.
PCIe SSD: discovery after A/C power cycle (long term),TC-85765,Active,ESS Script,Verify PCIe SSDs are reliably discovered after A/C power.,1,"Description
Verify that the system is updated with the latest revisions for BMC/iDRAC, backplane, BIOS, CPLD, etc.

Input Data
",Implicit.
,TC-85765,,,,2,"Description
Attach the maximum number of PCIe SSDs permitted by the system configuration.

Input Data
",Implicit.
,TC-85765,,,,3,"Description
Clear the system's SEL log.

Input Data
",SEL log cleared.
,TC-85765,,,,4,"Description
Boot into the OS and ensure system logs in automatically

Input Data
",Implicit.
,TC-85765,,,,5,"Description
Use a controllable PDU to remove AC power from the system after the system boots and the attempt has been made to discover all PCIe SSD devices. This will require some tweaking of parameters depending on how long the device discovery takes.
Sequence should look like: boot --> OS login --> Device Detection --> AC power off --> repeat

Input Data
",Test is set up to run unattended.
,TC-85765,,,,6,"Description
Allow the system to repeat the A/C cycle for at least 12 hours.

Input Data
","No memory or system initialization errors, or PCIe SSD errors are found. All PCIe SSDs are still accesible."
,TC-85765,,,,7,"Description
If applicable, check the device debug log for any errors.

Input Data
",No errors found.
PCIeSSD: RE (iDRAC GUI) physical disk Firmware inventory,TC-9772,Active,Manual,Verify iDRAC GUI discovers NVMe PCIe SSDs and displays its current firmware correctly,1,"Description

Install the maximum number supported PCIe SSDs



Input Data",Implicit.
,TC-9772,,,,2,"Description

Place your system on the network such that you're able to remotely access it via iDRAC.



Input Data",Implicit.
,TC-9772,,,,3,"Description

Launch the iDRAC GUI and navigate to Overview --> System Inventory--> Firmware Inventory.



Input Data",From the list of all the components check for PCIe SSD and its Current firmware version.
PCIe SSD: Generic Full Sweep Performance on Raw Drive,TC-53188,Active,Manual,TestDrive TestCase Objective was not specified.,1,"Description
Boot to a supported Windows or Linux OS with 1 PCIe SSD installed in the system.

Input Data
",The system boots and recognizes the PCIe SSD.
,TC-53188,,,,2,"Description
If using Windows, copy the IOMeter.exe and dynamo.exe files to the system. Else if using Linux, copy the source files to the system and run: 1. touch /usr/include/stropts.h 2. make -f Makefile-Linux.x86_64 dynamo

Input Data
",IOMeter is successfully installed on the test system.
,TC-53188,,,,3,"Description
Ensure that the PCIe SSD to be tested is not partitioned and does not have a filesystem on it.

Input Data
",The drive is raw.
,TC-53188,,,,4,"Description
If using Windows, double-click the IOMeter.exe file. Else if using Linux, you'll need another computer to run a Windows version of IOMeter on it. Then, you'll have to make sure that both the Linux test machine and the Windows computer are on the same network and can ping each other. The firewall on both machines will also have to be disabled ( service iptbales stop for the Linux machine). Once, this is setup, edit the /etc/hosts file on the Linux machine and add an entry for the new IP address of your Linux machine. Last, go into the directory with the IOMeter source files on the Linux machine and run: ./dynamo -i ""IP-Address of Windows computer"" -m ""my current IP-Address"" Then, go to the Windows computer and double-click the IOMeter.exe file.

Input Data
","IOMeter shows the system that you plan on testing underneath ""All Managers."" If Windows, it will look something like, ""WIN-...,"" else if using Linux, it will be the hostname of the machine."
,TC-53188,,,,5,"Description
Download the .icf files that are attached to this test case and save them somewhere on the test system if using Windows, or somewhere on the Windows computer if using Linux.

Input Data
",The .icf files are copied onto the appropriate machine.
,TC-53188,,,,6,"Description
From the IOMeter window, click the Open button and navigate to the location of where the .icf files are. Select and open the PreCondition.icf file .

Input Data
",You see only 4 workers listed now underneath the manager of the test system.
,TC-53188,,,,7,"Description
After expanding the manager of the test system, select each worker and assign the PCIe SSD drive as its ""Disk Target""

Input Data
",Implicit
,TC-53188,,,,8,"Description
For each worker, remove the ""4kRandWrite4kAlign"" access specification from the ""Access Specifications"" tab.

Input Data
","Each worker only has the ""64kSeq.."" test to run."
,TC-53188,,,,9,"Description
Click the ""Start Tests"" green flag button and the results do not need to be saved so you can click ""Cancel"" on the pop-up screen.

Input Data
",IO starts on the PCIe SSD.
,TC-53188,,,,10,"Description
You need to calculate the amount of time to let the test run. Select the ""Results Display"" tab and monitor the bandwith (Total MBs per Second) metric, call it B. Then get the capacity (in MB) of the PCIe SSD that you're measuring, call it C. Then, Number of seconds to run test = (2 * C) / B

Input Data
",Number of seconds to allow the PCIe SSD to be written to twice over is calculated.
,TC-53188,,,,11,"Description
Stop the I/O after the amount of time calulated in the step above.

Input Data
",I/O stops.
,TC-53188,,,,12,"Description
Now remove the ""64kSeq..."" test from each workers ""Access Specifications"" tab and add the ""4kSeqWrite.."" test in its place.

Input Data
","Each worker only has the ""4kSeq.."" test to run."
,TC-53188,,,,13,"Description
Click the ""Start Tests"" green flag button and the results do not need to be saved so you can click ""Cancel"" on the pop-up screen.

Input Data
",IO starts on the PCIe SSD.
,TC-53188,,,,14,"Description
You need to calculate the amount of time to let the test run. Select the ""Results Display"" tab and monitor the bandwith (Total MBs per Second) metric, call it B. Then get the capacity (in MB) of the PCIe SSD that you're measuring, call it C. Then, Number of seconds to run test = C / B

Input Data
",Number of seconds to allow the PCIe SSD to be written to once is calculated.
,TC-53188,,,,15,"Description
Stop the I/O after the amount of time calulated in the step above.

Input Data
",I/O stops.
,TC-53188,,,,16,"Description
Close the IOMeter window (this needs to be done due to a bug with opening multiple .icf files)

Input Data
",Implicit
,TC-53188,,,,17,"Description
If using Windows, double-click the IOMeter.exe file. Else if using Linux, go into the directory with the IOMeter source files on the Linux machine and run: ./dynamo -i ""IP-Address of Windows computer"" -m ""my current IP-Address"" Then, go to the Windows computer and double-click the IOMeter.exe file.

Input Data
","IOMeter shows the system that you plan on testing underneath ""All Managers."" If Windows, it will look something like, ""WIN-...,"" else if using Linux, it will be the hostname of the machine."
,TC-53188,,,,18,"Description
From the IOMeter window, click the Open button and navigate to the location of where the .icf files are. Select and open the Latency.icf file.

Input Data
",You see only 1 worker listed now underneath the manager of the test system.
,TC-53188,,,,19,"Description
After expanding the manager of the test system, select each worker and assign the PCIe SSD drive as its ""Disk Target""

Input Data
",Implicit
,TC-53188,,,,20,"Description
Click the ""Start Tests"" green flag and make sure to save the results this time.

Input Data
",I/O starts and the output is saved to a .csv file.
,TC-53188,,,,21,"Description
Once the ""Latency"" test is done, close the IOMeter window (this needs to be done due to a bug with opening multiple .icf files)

Input Data
",Implicit
,TC-53188,,,,22,"Description
If using Windows, double-click the IOMeter.exe file. Else if using Linux, go into the directory with the IOMeter source files on the Linux machine and run: ./dynamo -i ""IP-Address of Windows computer"" -m ""my current IP-Address"" Then, go to the Windows computer and double-click the IOMeter.exe file.

Input Data
","IOMeter shows the system that you plan on testing underneath ""All Managers."" If Windows, it will look something like, ""WIN-...,"" else if using Linux, it will be the hostname of the machine."
,TC-53188,,,,23,"Description
From the IOMeter window, click the Open button and navigate to the location of where the .icf files are. Select and open the Run4kA.icf file.

Input Data
",You see only 4 workers listed now underneath the manager of the test system.
,TC-53188,,,,24,"Description
After expanding the manager of the test system, select each worker and assign the PCIe SSD drive as its ""Disk Target""

Input Data
",Implicit
,TC-53188,,,,25,"Description
Click the ""Start Tests"" green flag and make sure to save the results this time.

Input Data
",I/O starts and the output is saved to a .csv file.
,TC-53188,,,,26,"Description
Both of the results files should be analyzed.

Input Data
",
PCIe SSD: Firmware activation without reset,TC-89513,Active,ESS Script,"NVMe devices must support Firmware Activation without Reset. Requiring a reset under any condition should be
avoided if possible
",1,"Description
Install NVMe device in the system and boot to the supported OS 

Input Data
",The system boots up without any relevant error in OS logs
,TC-89513,,,,2,"Description
Issue identify controller command to the device and check if firmware activation without reset is supported and also note down current firmware version. nvme-cli(linux only) or NVMeIOCTL (Automation Framework) can be used. 

Input Data
",The drive reports that firmware activation without reset is supported 
,TC-89513,,,,3,"Description
Issue firmware download command with right payload/binary path. 
Same tool as above can be used. 


Input Data
",The command completes successfully without any failure. 
,TC-89513,,,,4,"Description
Issue firmware activation command with slot to be activated and firmware commit action to be 3. 

Input Data
",Command completes successfully without any errors
,TC-89513,,,,5,"Description
Issue identify controller and check firmware revision 

Input Data
",The firmware provided for the flash was activated. 
PCIe SSD: Firmware activate and reset during I/O (Linux Only),TC-39349,Active,SDK,Perform firmware activation and device reset during I/O stress.,1,"Description
Begin I/O to the target device.  
    Example:
        Linux:  testio -t50 -f/dev/nvme0n1
        Windows:  testio.exe -f50 -f\\.\PHYSICALDRIVE0
        Framework:   
            import ServerStorageSDK.Helpers.IO as IO
            io = IO.IO()
            io.Validate('testio', False)
            io.Threads = 50
            io.Start(['/dev/nvme0n1'])



Input Data
",I/O starts.
,TC-39349,,,,2,"Description
Download device firmware:
Linux:
    nvme fw-download /dev/nvme0n1 -f your_fw_file.tar

Use the raw binary file or tar file for the FW (not the DUP)


Input Data
",Firmware download completes successfully.
,TC-39349,,,,3,"Description
Activate FW w/o reset:
Linux:
    nvme fw-commit /dev/nvme0n1 -a 3-s 0


Input Data
","Firmware activation succeeds.
IO haults while FW download and commit take place and then re-starts"
PCIe SSD: Firmware Download with Controller Reset (Linux Only),TC-81104,Active,SDK,,1,"Description
Boot to a supported operating systems with at least one PCIe SSD. 

Input Data
",PCIe SSD is discovered and link is fully trained to maximum width and speed.
,TC-81104,,,,2,"Description

 Write a script to: 

1.     Issue FW download to the PCIe SSD. You can get the binary or tar file of the FW by extracting its DUP.

Using nvmecli: nvme fw-download /dev/nvme0n1 -f FW.bin

Using framework: python3 NVMeIOCTL.py -fd B:D.F <path to FW file>

2.     Issue Controller Reset to the PCIe SSD. 

Using nvmecli: nvme reset /dev/nvme0n1

Using framework: python3 NVMeIOCTL.py -rc B:D.F

3.     Unload NVMe Driver. In linux, it can be done by issuing modprobe -r nvme. In windows, use framework.

4.     Load NVMe Driver. In Linux, it can be done by issuing modprobe nvme. In windows, use framework.

for 12 hours. After each loop, make sure device is discovered. If it doesn't, exit the script with a a failure.




Input Data
",The script runs for 12 hours successfully.
PCIe SSD - LED Management - Status and Activity LED with and without IO,TC-14919,Active,Manual,Validate that the activity LED should always be blinking Green as long as IO is running and should be off when there is not any activity going on in the drive. Status LED is unaffected by activity LED.,1,"Description

Install atleast one healthy PCIe SSDs and boot to OS



Input Data",The status LED is solid Green as soon as backplane receives power and/or device has been inserted to already powered on backplane.
,TC-14919,,,,2,"Description

Once in OS start running IO to the device



Input Data","The device activity LED starts Blinking Green wehere as the status LED stays solid green



For EDSFF devices: The Green Status LED will blink during I/O."
,TC-14919,,,,3,"Description

Stop running IO to the device



Input Data","The device activity LED stops Blinking Green and the status LED is Solid Green.



For EDSFF devices: The Green Status LED will return to solid once I/O has completed."
PCIe SSD - Led Management - HII - Blink/Un-Blink Drives,TC-11686,Active,Manual,Validate that issuing a blink command from HII results in the status LED for the device to blink green regardless of the device's current state,1,"Description

Install two or more PCIe SSDs and boot the system into the OS. The drives used for this test should be at different state conditions.





Input Data",The state of the drive should be solid Green
,TC-11686,,,,2,"Description

Reboot the system and go to HII (You can go to HII by pressing F2 during boot) and check the state of the drives during reboot.



Input Data",During reboot the state of the drive should stay Solid green.
,TC-11686,,,,3,"Description

Select the Physical disks from the listed device list



Input Data",-User is able to select the PCIe SSD physical disks installed in the system
,TC-11686,,,,4,"Description

Open the drop down menu for one of the drives and select the operation Blink



Input Data","- Drive LED blinks Green with identify pattern 250 milliseconds on and 250 milliseconds off regardless of the device current state



For ESDFF devices, the Blue LED will blink one second on and one second off. The Status LED should not be affected by identify operations."
,TC-11686,,,,5,"Description

Open the drop down menu for the second drive and select the operation Blink



Input Data",-Second drive LED blinks with the same pattern as shown in step 4
,TC-11686,,,,6,"Description

Open the drop down menu for the drive selected in step 4 or 5 and select unblink



Input Data",- Blinking stops for drive from step 4 or 5 and returns to the LED pattern and color correspondent to just before the blink command was issued.
PCIeSSD - NVMe Sanitize,TC-41756,Active,ESS Script,This test case is intended to validate that the NVMe Sanitize operations are supported and implemented correctly by the NVMe device.,1,"Description
Boot to a supported operating system with at least one NVMe device in the system

Input Data
",The NVMe device is detected by the driver and displayed in the OS
,TC-41756,,,,2,"Description
Using a tool that can send IOCTLs to the NVMe driver (like nvme-cli in Linux/ESXi or the Dell NVMeIOCTLCLI tool), issue an Identify Controller command to the drive(s)

Input Data
","Read the ""Sanitize Capabilities"" field (offset 331:328) and confirm that at the very least, bits 0 and 1 are set"
,TC-41756,,,,3,"Description
Partition, format, and put some data onto the drive(s)

Input Data
",Data is successfully copied onto the drive(s)
,TC-41756,,,,4,"Description
Using a tool for sending an IOCTL, issue a Sanitize command with the ""Sanitize Action"" set to 0x04 to the drive(s) in order to initiate a Sanitize - Cryptographic Erase operation

Input Data
",The command completes successfully and the data on the drive(s) is no longer accessible
,TC-41756,,,,5,"Description
Partition, format, and put some data onto the drive(s)

Input Data
",Data is successfully copied onto the drive(s)
,TC-41756,,,,6,"Description
Using a tool for sending an IOCTL, issue a Sanitize command with the ""Sanitize Action"" set to 0x02 to the drive(s) in order to initiate a Sanitize - Block Erase operation

Input Data
",The command completes successfully and the data on the drive(s) is no longer accessible
PCIe SSD: TCG Opal - Re key while running I/O to the device (Linux Only),TC-87961,Active,SDK,This test case checks locking and unlocking of global range to be used by EKMS solution ,1,"Description
Boot to the Linux OS with TCG Opal enabled device

Input Data
",The OS boots without any issue and device is accessible.
,TC-87961,,,,2,"Description
Check if device is enabled for locking by doing query. 
Ex- ./sedlib -a q -d /dev/nvme0n1 -x nvme
If not enabled then activate SP 
./sedlib -a asp -P MSID_password -d /dev/nvme0n1 -x nvme

The default password is set as MSID and can be retrieved via below command
./sedlib -a pm -d /dev/nvme0n1 -x nvme



Input Data
",The device is activated for locking 
,TC-87961,,,,3,"Description
Start running I/O to the device 
Ex- ./diskio -f /dev/nvme0n1 -b 128k -t 10



Input Data
",The I/O starts running on the device 
,TC-87961,,,,4,"Description
Change the key of the device 
Ex-
./sedlib -a cp -w admin1 -o MSID_password -P MSID_passwordnew -d /dev/nvme0n1 -x nvme





Input Data
",The pass key get's changed without any issue.  
,TC-87961,,,,5,"Description
Check the status of I/O running from step 3

Input Data
",The I/O continues to run uninterrupted. 
,TC-87961,,,,6,"Description
Change the key of the device to default passkey
Ex-
./sedlib -a cp -w admin1 -o MSID_passwordnew -P MSID_password -d /dev/nvme0n1 -x nvme




Input Data
",The key is changed back to default key i.e MSID
PCIeSSD: PCIe - Continuous Link Retrains,TC-26817,Active,SDK,The purpose of this test case is to make sure that the link going to the endpoint PCIe SSD always trains to the maximum supported width and speed.,1,"Description
Boot to a supported operating system with at least two PCIe SSDs.

Input Data
",Both PCIe SSDs are discovered and the link is fully trained to the maximum width and speed. Verify this from the parent above the PCIe SSD's config. space.
,TC-26817,,,,2,"Description
Start a script to cause a Link Retrain (bit 5 - Link Control Register) for 100 loops. After each loop, make sure that the link fully trains to the maximum width and speed. If it doesn't, exit the script with a failure.

Input Data
",The script completes all 100 loops successfully.
PCIe SSD: Delete original NameSpace and recreate an identical NameSpace,TC-85634,Active,TBD,The test case checks the device for Namespace management support ,1,"Boot to the supported OS with device supporting Namespace management
",The devices shows up in OS and no errors  were reported in SMART and OS logs
,TC-85634,,,,2,"Issue an Identify Namespace command to the drive and take a note of the: Namespace Size.

python3 NVMeIOCTCLI.py -id <bdf> # then select 1 as the NSID value",The command completes successfully and the value is saved
,TC-85634,,,,3,"Detach the current single namespace.
Ex- python3 NVMeIOCTLCLI.py -dtns <bdf>

Reset the controller (do this since not all drives support dynamic namespace change reporting)
python3 NVMeIOCTLCLI.py -rc <bdf>",Both commands are successful
,TC-85634,,,,4,"Delete the current single namespace 
python3 NVMeIOCTLCLI.py -dlns <bdf>","The command is successful and the block device is gone.

Ex - lsblk no longer shows the drive"
,TC-85634,,,,5,"Create a new namespace of the same size as noted in Step 2
Ex- python3 NVMeIOCTLCLI.py -crns <bdf>

Attach the newly created namespace
Ex- python3 NVMeIOCTLCLI.py -atns <bdf>

Reset to controller (do this since not all drives support dynamic namespace change reporting)
python3 NVMeIOCTLCLI.py -rc <bdf>

","All commands were successful and the drive block device is now enumerated


Ex - lsblk now shows a new drive"
,TC-85634,,,,6,"Issue an Identify Namespace command to the drive and take a note of the: Namespace Size

python3 NVMeIOCTCLI.py -id <bdf> # then select 1 as the NSID value",The Namespace Size has the same value as in step 2
PCIe SSD: Hot remove a drive while running I/O,TC-3759,Active,SDK,Verify the system remains operational when a PCIe SSD device disappears (ie. removed) while running I/O.,1,"Description
Install the device under test. If Write Through (WT) mode is applicable to the device, complete steps 1-4 for drives that are in WT mode (write caching disabled).

Input Data
","Implicit.

"
,TC-3759,,,,2,"Description
Boot to the OS and load the driver for the device. Perform some simple I/O operations on the drive.

Input Data
",Implicit.
,TC-3759,,,,3,"Description
Pull the device out.

Input Data
I/O halted and reported unknown error upon pulling device out
but system continues to function  without any fatal system error","I/O halts. The OS should report I/O errors saying that it could not complete certain I/O’s. Events are generated as a result of a Surprise Removal (ie. windows event log, linux dmesg, etc). The hardware disappeared from the system, there are no fatal system errors (eg. blue screen, kernel panic), the system continues to be functional."
,TC-3759,,,,4,"Description
Re-insert the drive. If supported by the I/O utility, verify data integrity (no data loss) when write caching is disabled.

Input Data
",Drive is visible and accessible. Data processed prior to the removal is intact. No data loss.
,TC-3759,,,,5,"Description
If applicable to the device, complete steps 1-4 for drives that have write caching enabled (might experience data loss).

Input Data
no differences  noted with & without windows OS Cache enabled/disabled
system continues to function irrespective","I/O halts. The OS should report I/O errors saying that it could not complete certain I/O’s. Events are generated as a result of a Surprise Removal (ie. windows event log, linux dmesg, etc). The hardware disappeared from the system, there are no fatal system errors (eg. blue screen, kernel panic), the system continues to be functional."
,TC-3759,,,,6,"Description
Repeat steps 2-5 10 times.

Input Data
results duplicated every repitition",Same results.
PCIe SSD - Correctable/Uncorrectable Error Check after I/O,TC-63651,Active,SDK,This test case is intended to check the signal integrity to the NVMe devices.,1,"Description
Boot to the operating system with NVMe devices populated behind each cable routed to the backplane

Input Data
",The system boots and the devices are discovered
,TC-63651,,,,2,"Description
Disable correctable error reporting for all NVMe drives, and parents BDFs above them (write to PCIe Cfg Space - Device Control Register)

Clear the Correctable Error Mask register


Input Data
",Correctable Error Reporting is disabled and all errors have been masked
,TC-63651,,,,3,"Description
Begin running I/O to all of the devices and allow it to run for 70 minutes
While I/O is in progress, poll the Correctable Error Status registers of the NVMe drives and parents of the drives


Input Data
","I/O runs successfully
No correctable errors are detected"
,TC-63651,,,,4,"Description
Dump the system event log (e.g. racadm getsel -E)

Input Data
",There are no Correctable or Uncorrectable errors being reported by the NVMe devices or parent of the NVMe devices in the log
,TC-63651,,,,5,"Description
Reboot the system and repeat steps 2-4 an additional 9 times

Input Data
",Same results
PCIeSSD: RE (iDRAC GUI) physical disk inventory,TC-87484,Active,Manual,Verify iDRAC GUI storage overview discovers NVMe PCIe SSDs and displays its properties correctly,1,"Description

Install the maximum number supported PCIe SSDs



Input Data",Implicit.
,TC-87484,,,,2,"Description

Place your system on the network such that you're able to remotely access it via iDRAC.



Input Data",Implicit.
,TC-87484,,,,3,"Description

Launch the iDRAC GUI and navigate to Storage --> Summary.



Input Data","Number displayed in the ""summary of disks"" field under ""Physical Disks"" should include all PCIe SSDs in the system





Physical Disks summary should report the correct state for the NVMe PCIe SSDs. These include; Status, Name, State, Slot Number, Size, Security Status, Bus Protocol, Media Type, Hot Spare and Remaining Write Endurance."
,TC-87484,,,,4,"Description

Click on ""Physical Disks""



Input Data","All disks in the system including NVMe PCIe SSDs are listed under ""Health and Properties""





Status, Name, Slot Number, Size, Security Status, Bus Protocol, Media Type,, Hot Spare, and Remaining Rated Write Endurance fields should be properly populated."
,TC-87484,,,,5,"Description

Change the filter to ""Group by"" Virtual Disks.



Input Data","No NVMe PCIe SSDs are listed under ""Health and Properties"""
,TC-87484,,,,6,"Description

Setup filter by changing ""Group by"" to Enclosure PCIe SSD BP 1 and click apply. For Universal BP it will be listed as BP14G+EXP



Input Data","Only NVMe PCIe SSDs are listed under ""Health and Properties""



Note: AIC PCIe SSDs will not show up”"
,TC-87484,,,,7,"Description

Expand the Advanced Properties for the NVMe PCIe SSDs and verify all information displayed is correct.



Input Data","Advanced Properties should display correct information for the following fields:



Status, Name, Device Description, State, slot Number, Size, Bus Protocol, Media Type Remaining Rated Write Endurance, Failure Predicted, PCIe Negotiated Link Speed, PCIe Max Link Speed, Device Protocol, Model, Manufacturer, Product ID, Revision, Serial Number, Form Factor, PCIe Negotiated Link Width, PCIe Capable Link Width, Self Encrypting Drive Capability, Controller (For 2.5"" SFF only), and Enclosure ."
SED - Security Key Change and Locked Foreign Configuration Import (PERC),DSSTC-571,,Manual - PERC,Verify SED can be locked and unlocked by PERC,1,Boot SUT with SED drive,SUT boots successfully
,DSSTC-571,,,,2,"View all the controllers, PDs, VDs and the slot numbers of the target drive. # perccli /call/eall/sall show","Note the Controller id, Enclosure id and the slot id of the target drive."
,DSSTC-571,,,,3,Convert the drive to JBOD/Non-RAID Mode. PERC11: # perccli /cx/ex/sx set jbod force PERC12: # perccli2 /cx/ex/sx set NonRAID force,The drive was successfully set to JBOD/Non-RAID Mode.
,DSSTC-571,,,,4,"Enable the Security Key on the Controller and set the Security Key with the Key ID provided. PERC11: # perccli /cx set securitykey=Dell@123 keyid=1 PERC12: # perccli2 /cx set security securitykey=Dell@123 keyid=1 Alternatively, go to iDRAC GUI -> Storage -> Controllers -> Actions -> Edit -> Security -> Create Security Key",The Security Key and Key ID was successfully set on the Controller.
,DSSTC-571,,,,5,Secure the drive. # perccli /cx set security=on,Secured PD created.
,DSSTC-571,,,,6,Physically remove the drive from SUT. Change Security Key on the Controller. PERC11: # perccli /cx set securitykey=Dell@123456 oldsecuritykey=Dell@123 keyid=1 PERC12: # perccli2 /cx set security rekey oldsecuritykey=Dell@123 securitykey=Dell@123456 keyid=1,The Controller Security Key was changed successfully.
,DSSTC-571,,,,7,"Re-insert the drive into SUT. Verify the PD State is ""F"". # perccli /call/eall/sall show",The PD is in Foreign State.
,DSSTC-571,,,,8,"Attempt to import foreign configuration by providing old controller security key. PERC11: # perccli /cx/fall import securityKey=Dell@123 PERC12: # perccli2 /cx/fall import securityKey=Dell@123 keyid=1 Alternatively, go to BIOS System setup -> Device Settings -> RAID Controller -> Main Menu -> Configuration Management -> Manage Foreign Configuration -> Enter Passphrase for Locked Disks",The foreign PD is unlocked and imported successfully.
,DSSTC-571,,,,9,Verify the Controller and PD State. # perccli /call/eall/sall show,No Foreign Configuration on the Controller. The PD is in JBOD/Non-RAID Mode.
,DSSTC-571,,,,10,Convert the drive to Unconfigured Good State. PERC11: # perccli /cx/ex/sx set good force PERC12: # perccli2 /cx/ex/sx set uconf force,The drive was set to Unconfigured Good State successfully.
,DSSTC-571,,,,11,Perform Secure Erase on the drive. PERC11: # perccli /cx/ex/sx secureerase force PERC12: # perccli2 /cx/ex/sx start erase type=reprovision force,The Drive Secure Erase was performed successfully.
,DSSTC-571,,,,12,Delete the Security Key on the Controller. PERC11: # perccli /cx delete securitykey PERC12: # perccli2 /cx delete security securitykey,The Security Key on the Controller was deleted successfully.
Verify a consistency check on new VDs completes successfully,DSSTC-1067,,Manual - PERC,Confirm that no drive issues are found with a consistency check of a fault tolerant RAID VD on PERC,1,"Boot into BIOS Setup, go to Devices, RAID (PERC) controller.",Successfully boots into controller BIOS.
,DSSTC-1067,,,,2,"If have not already been done, create a RAID 1 or 5 VD, according to SOW if applicable. Otherwise create a small VD (100 GB or so) for the sake of time. Select a full initialization. # perccli /call/vall show // Get VD number # perccli /cx/vx start init full force # perccli /cx/vx show init // Check initialization status",Successfully creates VDs.
,DSSTC-1067,,,,3,Boot into OS.,
,DSSTC-1067,,,,4,Verify full initialization is complete. Example: perccli /c0 /v0 show init,Full initialization completes successfully.
,DSSTC-1067,,,,5,Execute consistency check on VDs using perccli. Example: perccli /c0 /v0 start cc,Consistency check execution is successful. CC may take some time depending on size of VD.
,DSSTC-1067,,,,6,"Verify that CC was executed in controller event logs and iDRAC Lifecycle log (PERC.) Check for start, stop, completed etc. Example: perccli/c0 /v0 show cc (show cc progress) Note: CC will not run if full init has not been completed. After cc complete: perccli /c0 show events > events.log",Events captured in logs.
,DSSTC-1067,,,,7,Allow CC to complete.,CC completes successfully. No inconsistency should be found.
iDRAC - iDRAC Logs Check,DSSTC-3266,,Manual,"Check for errors reported against the device under test in the Lifecycle Log and the System Event Log. This check should occur throughout validation, not just once.",1,Navigate to the Lifecycle Log section of the iDRAC GUI located at Maintenance -> Lifecycle Log,The contents of the Lifecycle log is displayed.
,DSSTC-3266,,,,2,Check the Lifecycle log for errors related to,
,DSSTC-3266,,,,3 ,Navigate to Maintenance -> System event Log ,System Event Log displays. 
,DSSTC-3266,,,,4 ,Check the SEL log for errors related to device under test.  ,No error or warning messages related to device under test are present. 
Verify drive information in BIOS via UEFI HII or RAID/HBA Controller Utility,DSSTC-4210,,Manual,Verify the Drive under Test (DUT) is able to be detected by BIOS and HII device configuration (System Setup),1,"Power on the (SUT) Server Under Test. When prompted, press F2 to enter System Setup (BIOS).",Server powered and successfully entered System BIOS.
,DSSTC-4210,,,,2,"This step is only for CPU-direct NVMe SSD. For drive installed on PERC, please omit. Check if the NVMe SSD is able to be detected in Device Settings list. And check the information of NVMe SSD shows in the BIOS are correct comparing to the NVMe SSD specification. Note: Some channel drives might fail this test when BIOS NVMe Driver was set to default “Dell Qualified Drives”. “All Drives” option might help these channel drives PASS this test, but might cause some other unexpected system behaviors. If ""All Drives"" option is found to be necessary for correct functionality, note this in the test report and communicate to the DM for the intake.",NVMe SSD is able to be detected by BIOS. The NVMe SSD information shown in the BIOS are correct as its specification.
,DSSTC-4210,,,,3 ,"This step is only for drive installed on PERC. For CPU-direct NVMe SSD, please omit. Enter the BIOS setup -> Device Settings -> RAID Controller Configuration Utility. ",Utility launches correctly or access the RAID controller configuration normally. 
,DSSTC-4210,,,,4 ,"This step is only for drive installed on PERC. For CPU-direct NVMe SSD, please omit. Verify all drives attached to controller/s are displayed.  ",All attached drives are reported on the correct channel and ID.  
,DSSTC-4210,,,,5 ,"This step is only for drive installed on PERC. For CPU-direct NVMe SSD, please omit.  Verify the correct drive model, drive capacity, and firmware version is displayed for each drive. ","All the drive Information is consistent with the drive label (SAS/SATA protocol, speed, capacity, etc) and the known latest FW update. Drive mode is reported properly for all integrated devices.  "
SED - Secured VD Creation and Drive Secure Erase (PERC),DSSTC-4668,,Manual - PERC,Check that drives can be secured through creating a secure VD and can be erased after deleting the VD.,1,"Although perccli utility is easier to run this test, it is allowed to execute on iDRAC or BIOS.",
,DSSTC-4668,,,,2,Boot into OS and install the DSS Validation Toolkit. perccli utility will be installed as part of the DSS Validation Toolkit.,perccli utility is installed in the SUT.
,DSSTC-4668,,,,3,"Execute the command below to choose the Physical disks you want to Secure Erase. View all the PDs, VDs, controller and the slot numbers of the drive. # perccli /call/eall/sall show","Noted the Controller id, Enclosure id and the slot id of the drive to perform Secure Erase on."
,DSSTC-4668,,,,4,Execute the command below to enable the Security Key on the Controller and set the Security Key with the Key ID provided. PERC11: # perccli /cx set securitykey=Dell@123 keyid=1 PERC12: # perccli2 /cx set security securitykey=Dell@123 keyid=1,The Security Key and Key ID was successfully set on the Controller.
,DSSTC-4668,,,,5,VD creation and perccli secure erase does not support drive in Non-RAID State. Execute the command below to convert the drive to Unconfigured Good State. PERC11: # perccli /cx/ex/sx set good force PERC12: # perccli2 /cx/ex/sx set uconf force,The drive was successfully set to Unconfigured Good State.
,DSSTC-4668,,,,6,Execute the command below to create a Secured Virtual Disk. PERC11: # perccli /cx add vd r0 drives=EnclosureID:DriveSlotID SED PERC12: # perccli2 /cx add vd r0 drives=EnclosureID:DriveSlotID secure,The Secured Virtual Disk was successfully created.
,DSSTC-4668,,,,7,Execute the command below to verify the security key was enabled on the drive and the physical disk was secured. PERC11: # perccli /cx/ex/sx show securityKey keyid PERC12: # perccli /cx/ex/sx show security keyid,The security key was successfully enabled on the drive and the physical disk was successfully secured.
,DSSTC-4668,,,,8,"Before a secure erase of the drive can occur, the virtual disk needs to be deleted. Execute the command below to choose the VD you want to delete. # perccli /call/vall show",Noted the Controller id and virtual disk to delete.
,DSSTC-4668,,,,9,Execute the command below to delete the VD you choose. # perccli /cx/vx del force,Status = Success Description = Delete VD succeeded The virtual disk is deleted successfully.
,DSSTC-4668,,,,10,"Perform Secure Erase on the drive we selected. PERC11: # perccli /cx/ex/sx secureerase force PERC12: # perccli2 /cx/ex/sx start erase type=reprovision force /cx - Specifies a controller where x is the controller index /ex - Specifies an enclosure where x is the enclosure device ID. /sx - Specifies a physical drive where x is the slot number Note: You will receive error message ""Secure Erase is not allowed on this drive"" if the SED drive does not support Secure Erase feature.",Status = Success Description = Drive Secure Erase Succeeded. The Drive Secure Erase was performed successfully. All the SED drives should be in Unconfigured Good state after Secure Erase.
,DSSTC-4668,,,,11,Execute the command below to delete the Security Key on the Controller. PERC11: # perccli /cx delete securitykey PERC12: # perccli2 /cx delete security securitykey,The Security Key on the Controller was deleted successfully.
Opal: Opal Drive Identification - perccli,DSSTC-5255,,Manual - PERC,"Using Opal drives, verify PERCcli correctly identifies them as Opal and supporting encryption.",1,Show all the PD by running: # perccli /call/eall/sall show,"All the PD listed. For PERC11: The column ""SED"" in the PD list shows ""Y"" for TCG Opal drives. For PERC12: The column ""SED_Type"" in the PD list shows ""Opal"" for TCG Opal drives."
,DSSTC-5255,,,,2,Choose an Opal drive and output the detailed information by running: # perccli /cx/ex/sx show all J,The detailed information of the Opal drive listed in JSON format.
,DSSTC-5255,,,,3,"Verify the Opal drive is identified as Opal compliant. For PERC11, check ""FDE Type=TCG Opal"" For PERC12, check ""SED_Type=Opal""","Drive shows encryption capable, encryption not being disabled by FW, and type OPAL"
,DSSTC-5255,,,,4,"Verify the Opal drive is identified as SED capable. For PERC11/12, check ""SED Capable=Yes""","Drive shows encryption capable, encryption not being disabled by FW, and type OPAL"
Opal: Opal Drive Identification and Cryptographic Erase - iDRAC,DSSTC-5262,,Manual,Verify iDRAC correctly identifies Opal drive as Opal. iDRAC is able to successfully execute Cryptographic Erase option on an Opal-enabled secure drive.,1,Start with Opal enabled drive in system. Use a non-boot drive for this test. Note that the drive needs to be unlocked or reverted for iDRAC to be able to do a Cryptographic Erase.,
,DSSTC-5262,,,,2,"Go to iDRAC Storage -> Physical Disks. Choose a target Opal drive, click the ""+"" sign next to the PD, and check the drive information. Verify the PD security related information indicates the drive which support encryption (Opal) correctly. ""Encryption Protocol"" = ""TCG Opal SSC"" ""Security Status"" = ""Encryption Capable""",iDRAC lists the PD and shows Opal capability correctly. Drive shows encryption protocol as Opal and encryption capable. Notes: Some channel drives might fail this test when BIOS NVMe Driver was set to default “Dell Qualified Drives”. “All Drives” option might help these channel drives PASS this test but might cause some other unexpected system behaviors.
,DSSTC-5262,,,,3,"Omit this step if the target Opal drive is already in Ready State. PERC11: If the target Opal drive is Non-RAID State, go to ""Virtual Disks"" and delete its Non-RAID VD. PERC12: Select the target Opal drive and perform ""Convert to RAID"" operation.",Drive is successfully converted to Ready State.
,DSSTC-5262,,,,4,"Select the target Opal drive PD and select Cryptographic Erase in ""Actions"" drop-down menu. Run the erase and verify successful completion.",Cryptographic Erase is complete successfully.
Drive PD Management - perccli,DSSTC-5289,,Manual - PERC,Verify drive management using perccli,1,Install latest perccli utility on the system.,
,DSSTC-5289,,,,2,"Verify drive properties. # perccli /call show all // Show information about all controllers, including enclosure & slots. # perccli /cx/ex/sx show all // Show properties for a specific disk. Substitute 'x' for the controller ID, enclosure ID, and slot number.",All expected drive properties are displayed with accurate value.
,DSSTC-5289,,,,3,Set the drive to Non-RAID mode. PERC11: # perccli /cx/ex/sx set jbod force PERC12: # perccli2 /cx/ex/sx set NonRAID force,Non-RAID Disk was created on the drive.
,DSSTC-5289,,,,4,Set the drive to Unconfigured Good status. PERC11: # perccli /cx/ex/sx set good force PERC12: # perccli2 /cx/ex/sx set uconf force,The drive was set to Unconfigured Good status successfully.
,DSSTC-5289,,,,5,"Perform PD Erase on the drive. Any erase method that could successfully erase the drive was accepted. For Non-SED drive, perform Crypto Erase or Sanitize: PERC11: # perccli /cx/ex/sx start erase crypto PERC12: # perccli2 /cx/ex/sx start erase type=crypto force For SED drive, perform Secure Erase: PERC11: # perccli /cx/ex/sx secureerase force PERC12: # perccli2 /cx/ex/sx start erase type=reprovision force You can also perform Sanitize on PERC12: # perccli2 /cx/ex/sx start erase type=sanitize mode=2 force",Erase command performed on the drive. PD erase starts and completes successfully. Erase progress is available every few seconds in TTY log and in the application.
,DSSTC-5289,,,,6,"Perform ""Export Log"" on a drive. # perccli /cx show all logfile=<perccli_controller>.txt # perccli /cx/ex/sx show all logfile=<perccli_drive>.txt",Logs exported successfully
,DSSTC-5289,,,,7,Create Virtual Disk on the drive. # perccli /cx add vd r0 drives=<e:s>,Virtual Disk could be created successfully.
Drive PD Management - HII,DSSTC-5291,,Manual - PERC,Verify drive management using HII (BIOS Setup),1,"Go to BIOS System Setup -> Device Settings -> RAID Controller -> Physical Disk Verify drive properties Notes: If the drive is a TCG Opal drive, the property should indicate Opal security.",All expected drive properties are displayed with accurate value. Opal security verified for TCG Opal drive.
,DSSTC-5291,,,,2,"Perform ""Convert to Non-RAID Disk"" operation",Non-RAID Disk created on the drive
,DSSTC-5291,,,,3,"Perform ""Convert to RAID Capable"" operation",Non-RAID Disk deleted
,DSSTC-5291,,,,4,Perform Cryptographic Erase on a drive,PD erase starts and completes successfully.
,DSSTC-5291,,,,5,Blink and then unblink LEDs,LEDs can be blinked and then unblinked
iDRAC - HW Inventory Verification (Channel Commodities),DSSTC-5346,,Manual,"The purpose of this test case is to gather information in iDRAC's HW Inventory section for channel devices - that is, devices that are NOT Dell-certified and who's information is NOT expected to fully populate in iDRAC. Channel devices usually have spotty coverage in iDRAC. This test case is NOT to be run as a pass / fail. Instead, this test case should be utilized as one would think of a 'task' -- once all information is gathered in the HW Inventory, report the information and mark this test case as 'Complete'.",1,Log in to the iDRAC web UI and navigate to System -> Inventory -> HW Inventory.,
,DSSTC-5346,,,,2,"Locate the DUT(s) in the list of HW devices. It may be necessary to page through the HW Inventory to locate the DUT. IMPORTANT: Some PCI devices may have more than one list element. It may be necessary to remove the DUT and compare the two inventories in order to identify all of the associated HW devices, such as PCI or UHCI chipsets. IMPORTANT: If the Device Under Test (DUT) is a channel NVMe drive, the System BIOS setting (System BIOS Settings - NVMe Settings - BIOS NVMe Driver) may affect the test results. Generally, setting it to ""All Drives"" allows more drive properties to be recognized in iDRAC. Using the default setting ""Dell Qualified Drives"" will only show limited properties. Note: Testing should follow the settings specified in the test requirements. If not specified, use the default settings. When issues arise, communicate with the Device Manager (DM) to determine if settings need to be changed for testing.",The DUT is present in the list of HW.
,DSSTC-5346,,,,3,"Review the hardware information for the DUT and verify that all of the device's attributes are populated and accurate. Attributes that are listed as ""Information Not Available"" mean that iDRAC cannot find that information. NOTE: Some of the bus numbers are in hex and others are in decimal. It is recommended to use tools such as those provided by the OS or the vendor to verify the accuracy of the device's attributes.",Collect all HW Inventory information shown and add this information to your project folder (HW Inventory allows you to export its list to an XML file) Make special note of any missing information in the DUTs section of the HW Inventory in the final report.
Opal: Security Operations - sedutil (PCIe),DSSTC-5351,,Manual,"This test case verifies the Opal functionality of MBR Shadowing, Locking Range, and PSID Revert on an TCG OPAL-compliant drive in OS. This test case only applies to PCIe-direct SSD.",1,"This test case only applies to PCIe-direct SSD. Get PSID printed on the drive label to revert the drive and erase all data. This will be a long hexadecimal number. If there are any dashes in the number, remove them. Follow the steps in Test Setup to complete sedutil tool installation.",
,DSSTC-5351,,,,2,Scan for Opal compliant drives: # sedutil-cli --scan Example: Scanning for Opal compliant disks /dev/nvme0 No INTEL SSDPF2KE128T1 9CV10200 /dev/nvme1 2 MTFDKCC3T8TGP-1BK1DABYY E3MQ000 /dev/nvme0: No Opal Support /dev/nvme1: TCG Opal2.0 Compliant,Opal compliant disks are listed.
,DSSTC-5351,,,,3,Make sure the drive is a valid SED drive: # sedutil-cli --isValidSED /dev/nvmeX Example: /dev/nvme1 SED -2- MTFDKCC3T8TGP-1BK1DABYY E3MQ000 /dev/nvme1: TCG Opal2.0 Compliant,Disks are indicated to be SED.
,DSSTC-5351,,,,4,Perform the initial setup step: # sedutil-cli --initialSetup /dev/nvmeX Example: # sedutil-cli --initialSetup Dell1234 /dev/nvme1 takeOwnership complete Locking SP Activate Complete LockingRange0 disabled LockingRange0 set to RW MBRDone set on MBRDone set on MBREnable set on Initial setup of TPer complete on /dev/nvme1,Initial setup is successful.
,DSSTC-5351,,,,5,Disable MBR shadowing and mark MBR unlocking process as complete: # sedutil-cli --setMBREnable off /dev/nvmeX # sedutil-cli --setMBRDone off /dev/nvmeX Example: # sedutil-cli --setMBREnable off Dell1234 /dev/nvme1 MBRDone set on MBREnable set off # sedutil-cli --setMBRDone off Dell1234 /dev/nvme1 MBRDone set off,MBR shadowing is disabled. Data access is allowed without pre-boot authentication.
,DSSTC-5351,,,,6,"Enable a Locking Range on the entire drive: # sedutil-cli --enableLockingRange 0 /dev/nvmeX Example: # sedutil-cli --enableLockingRange 0 Dell1234 /dev/nvme1 LockingRange0 enabled ReadLocking,WriteLocking",Locking range is enabled. The entire drive is set to a locked state.
,DSSTC-5351,,,,7,Set the status of the Locking Range to Read/Write access: # sedutil-cli --setLockingRange 0 RW /dev/nvmeX Example: # sedutil-cli --setLockingRange 0 RW Dell1234 /dev/nvme1 LockingRange0 set to RW,Locking range is set to Read/Write access.
,DSSTC-5351,,,,8,Run Read/Write I/O for 30s on the drive: # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=readwrite --runtime=30,Verify successful data access and no error reported. Read and write I/O runs without error.
,DSSTC-5351,,,,9,Set the status of the Locking Range to Locked Mode: # sedutil-cli --setLockingRange 0 LK /dev/nvmeX Example: # sedutil-cli --setLockingRange 0 LK Dell1234 /dev/nvme1 LockingRange0 set to LK,Locking range is set to locked (LK.)
,DSSTC-5351,,,,10,Run Read I/O on the drive. I/O running should Fail. # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=read --runtime=5 Run Write I/O on the drive. I/O running should Fail. # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=write --runtime=5,Verify data access is locked. Read and write I/O should both fail.
,DSSTC-5351,,,,11,Set the status of the Locking Range to Read Only: # sedutil-cli --setLockingRange 0 RO /dev/nvmeX Example: # sedutil-cli --setLockingRange 0 RO Dell1234 /dev/nvme1 LockingRange0 set to RO,Locking range is set to read-only.
,DSSTC-5351,,,,12,Run Read I/O on the drive. I/O running should Succeed. # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=read --runtime=5 Run Write I/O on the drive. I/O running should Fail. # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=write --runtime=5,Verify Read access is allowed but Write access is locked. Reads should succeed and writes should fail in read-only mode.
,DSSTC-5351,,,,13,Set the status of the Locking Range back to Read/Write access: # sedutil-cli --setLockingRange 0 RW /dev/nvmeX Example: # sedutil-cli --setLockingRange 0 RW Dell1234 /dev/nvme1 LockingRange0 set to RW,Locking range is set back to read-write.
,DSSTC-5351,,,,14,Run Read/Write I/O for 30s on the drive: # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=readwrite --runtime=30,Verify Read/Write data access is unlocked/restored and no error reported. Read and write I/O runs without error.
,DSSTC-5351,,,,15,Set the status of the Locking Range to Locked Mode again: # sedutil-cli --setLockingRange 0 LK /dev/nvmeX Verify consistent Locking Range functionality. Example: # sedutil-cli --setLockingRange 0 LK Dell1234 /dev/nvme1 LockingRange0 set to LK,Locking range is set to locked (LK.)
,DSSTC-5351,,,,16,Disable the Locking Range on the drive: # sedutil-cli --disableLockingRange 0 /dev/nvmeX Example: # sedutil-cli --disableLockingRange 0 Dell1234 /dev/nvme1 LockingRange0 disabled,Locking range is disabled.
,DSSTC-5351,,,,17,Run Read/Write I/O for 30s on the drive: # fio --direct=1 --filename=/dev/nvmeXn1 --name=test --rw=readwrite --runtime=30,Verify successful data access and no error reported. Read and write I/O runs without error.
,DSSTC-5351,,,,18,"Use PSID to revert the drive and erase all data. PSID is a long hexadecimal number printed on the drive label. If there are any dashes in the number, remove them. # sedutil-cli --yesIreallywanttoERASEALLmydatausingthePSID /dev/nvmeX Example: # sedutil-cli --yesIreallywanttoERASEALLmydatausingthePSID 016C0234011A0941AB08EE89D18D8C87 /dev/nvme1 revertTper completed successfully",Drive is reverted successfully.
iDRAC Compatibility with Drive,DSSTC-5381,,Manual,"Objective – Verification of System Inventory page for drive. Verification of Storage Summary Page for physical disks, storage summary table and Recently Logged Storage Events. Verification of disk write endurance info in iDRAC for drives.",1,Login to iDRAC GUI and Navigate to System Page.,System Page launched Successfully.
,DSSTC-5381,,,,2,Choose the Inventory tab. Verify the 'Firmware Inventory' table,The table contain the following: Two columns: Component and FW Version Check whether iDRAC support to display the FW version for the NVMe under test
,DSSTC-5381,,,,3,Choose the Inventory tab. Verify the 'Hardware Inventory' table.,"For PCIe SSD Hardware Inventory: To check whether two items listed for each NVMe under test PCIe SSD in Slot X in Bay Y, it lists the Bus number, DeviceProtocol, FormFactor, Speed, PCIe LinkWidth, ProductID, MediaType, Model, SerialNumber, Slot, SystemEraseCapability etc. PCIe SSD in Slot X in Bay Y - PCI Device, it lists the BusNumber, DataBusWidth, DeviceDescription, DeviceType, PCIDeviceID, PCISubDeviceID, PCISubVendorID, PCIVendorID, SLotType etc. Note: Some channel drives might fail this test when BIOS NVMe Driver was set to default “Dell Qualified Drives”. “All Drives” option might help these channel drives PASS this test but might cause some other unexpected system behaviors."
,DSSTC-5381,,,,4,Login in to iDRAC GUI and Navigate to Storage Page.,Storage Page launched Successfully.
,DSSTC-5381,,,,5,Verify the 'Storage Summary' table,"The table should contain the following: Physical Disks Overview: The pie chart should show the count of Online, Ready, Removed, Failed, Non-RAID, Foreign, Unknown, Blocked, Offline Disks Summary of Disks: Should show the number of Physical Disks, Virtual Disks, Global and Dedicated hotspares Clicking on the Physical Disks and Virtual Disks link should launch the respective pages The Physical Disks count should include all types of disks (HDD, SATA/SAS SSD, PCIe SSD)"
,DSSTC-5381,,,,6,Verify the 'Recently Logged Storage Events' table.,Should show the latest Storage Logs.
,DSSTC-5381,,,,7,Click on the Refresh Button.,The page should get refreshed successfully.
,DSSTC-5381,,,,8,"Select the 'Physical Disks' tab, verify the 'Physical Disks' table.","The table should contain the following: e.g. PCIe SSD in Slot X in Bay Y: it displays the State, Slot Number, Size, Bus Protocol, Meida Type and Actions etc. Click the PCIe SSD in Slot X in Bay Y, it shows Drives Details which including Failure Predicted, Remaining Rated Write Endurance, Model, SAS/SATA/PCIe/NVMe Drive information, Security, Manufacturing Information etc."
,DSSTC-5381,,,,9,"Examine the ""Remaining Rated Write Endurance"" values for all the installed devices being tested.  (Ex. 100%) in ""Physical Disks"" section under ""Storage"" page.","A numeric percentage value should be reported for all the devices being tested.  (Example: 100%) Pre-check: For factory new SSD: RRWE should be 99%-100%. For non-new SSD (e.g., from Proto Lab/HWL): RRWE should be >=80% at the start of validation. If SSD RRWE was below the above criteria, check with the vendor for sample replacement, or flag it as a concern/risk. Post-check: SSD RRWE should not drop more than 1%-2% during a validation cycle. Any >1% RRWE drop should be noted, analyzed and checked with the vendor. Notes: a) For a channel drive, the ""Remaining Rated Write Endurance"" value might not show on iDRAC. You can use ""smartctl -x "" to check ""Percentage Used"" value. b) This test will fail for drives that don’t have NVMe-MI smbus/mctp implemented. Also, results may vary slightly for SAS/SATA vs NVMe."
,DSSTC-5381,,,,10,"In the 'Physical Disks' tab, pick the drive under test, verify the 'Actions'","The 'Actions‘ table should contain the following: Prepare to remove Cryptographic Erase PSID Revert View Enclosures Prepare to remove: Select 'Prepare to remove' action, the iDRAC should prompt the window to ’Apply Operation Mode', confirm 'Apply Now' and click Apply button. Then 'Warning' let you know and continue to press OK."
Verify drive information using vendor tools,DSSTC-5386,,Manual,Objective – Verify the drive information is being reported correctly in the OS.,1,For drives behind the Dell PERC controller utilize perccli to get drive information. See Test Case Notes for perccli usage information.,Execute perccli to get drive information and redirect to a text file.  Example:   perccli /c0/eall/sall show all > disks.txt  Drive information is displayed and accurate.
,DSSTC-5386,,,,2,"For drives not behind a Dell PERC controller, use appropriate vendor tool to verify drive information.",Example: Micron msecli -L   (lists Micron drive information) Drive information is displayed and accurate.
,DSSTC-5386,,,,3,"For Dell storage arrays, use DSS_Vallidation tool to view drive information:",ldstate info Use array management GUI or CLI tool(s) to view drive information if applicable. Drive information is displayed and accurate.
Drive Hot-Swap (RAID Mode Only),DSSTC-5390,,Manual - PERC,Objective – Verify drives attached to PERC can be hot-swapped without failures.,1,"Convert the drives to Unconfigured Good status and Create a Virtual Drive (VD) with fault tolerance (RAID1, 5, 10, etc.)",VD should be created for full volume of drive. Convert drive to Unconfigured Good: PERC11: # perccli /cx/ex/sx set good force PERC12: # perccli2 /cx/ex/sx set uconf force Create Virtual Disk: # perccli /cx add vd r drives=<e:s
,DSSTC-5390,,,,2,After creating the VD do a fast initialization.,"# perccli /call/vall show // Get VD number # perccli /cx/vx start init force # perccli /cx/vx show init // Check initialization status You can alternatively perform a fast initialization on iDRAC GUI, go to Virtual Disk management -> Select the VD -> go in operation drop down menu and select Fast Initialization. A fast initialization should start. Check the progress in the Virtual Disk management tab. Let the initialization complete depending on the drive capacity it may take few minutes."
,DSSTC-5390,,,,3,"After initialization complete, boot into OS and start ""./diskio"" under ""/root/DSS_Validation/Tools/diskio/"" on this particular VD.","# ./diskio -f /dev/sdX -P -i1 -b64k -t16 -s1 -p1 -r50 20G -d14400 Alternatively, another I/O tool capable of data comparisons may be used. I/O running."
,DSSTC-5390,,,,4,You should see the activity LED on the drive blinking. Wait for 1~2min to let diskio running stable. FAIL a single drive member by removing one drive from the VD.,"No unexpected error was reported in diskio output, SEL and LClog. The RAID array should continue to function with loss of one drive. Activity LED should continue on the remaining drives in the RAID volume."
,DSSTC-5390,,,,5,Insert a new clean drive. In case you do not have a new FOB drive please insert the same drive removed. Ensure the drive is the same model type/family.,"Drive insertion should be detected and see status LED. No unexpected error was reported in diskio output, SEL and LClog."
,DSSTC-5390,,,,6,"The rebuild process will start automatically. If not, manually import the drive and begin the array rebuild: # perccli /cx/fall import While drive rebuilding is in progress, check the status LED of the drive.","The drive should be successfully imported. Rebuild should start immediately. When drive rebuild starts, verify the drive Status LED starts Blinking Green: ON 400 ms OFF 100 ms"
